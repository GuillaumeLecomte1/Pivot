# Detect terminal capabilities
if [ -t 1 ] && command -v tput > /dev/null 2>&1 && tput colors > /dev/null 2>&1; then
    # Colors for better visual output
    RED=$(tput setaf 1)
    GREEN=$(tput setaf 2)
    YELLOW=$(tput setaf 3)
    BLUE=$(tput setaf 4)
    PURPLE=$(tput setaf 5)
    CYAN=$(tput setaf 6)
    WHITE=$(tput setaf 7; tput bold)
    NC=$(tput sgr0) # No Color
else
    # No colors for basic terminals
    RED=''
    GREEN=''
    YELLOW=''
    BLUE=''
    PURPLE=''
    CYAN=''
    WHITE=''
    NC=''
fi

echo ""
echo "${CYAN}ğŸ“ Validation du message de commit...${NC}"
echo ""

if npx --no -- commitlint --edit "$1"; then
    echo "${GREEN}âœ… Message de commit valide !${NC}"
    echo "${BLUE}ğŸ’¡ Format: type(scope): description${NC}"
else
    echo ""
    echo "${RED}â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—${NC}"
    echo "${RED}â•‘                ${WHITE}âŒ MESSAGE INVALIDE !${RED}                   â•‘${NC}"
    echo "${RED}â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
    echo ""
    echo "${YELLOW}ğŸ“‹ Format attendu: ${WHITE}type(scope): description${NC}"
    echo "${YELLOW}ğŸ“‹ Types valides: ${WHITE}feat, fix, docs, style, refactor, perf, test, build, ci, chore, revert${NC}"
    echo ""
    echo "${CYAN}ğŸ’¡ Exemples:${NC}"
    echo "  ${GREEN}feat: add user authentication${NC}"
    echo "  ${GREEN}fix(api): resolve login endpoint issue${NC}"
    echo "  ${GREEN}docs: update README installation steps${NC}"
    echo ""
    exit 1
fi