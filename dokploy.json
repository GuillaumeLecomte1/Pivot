{
  "name": "pivot",
  "description": "Application Laravel Pivot - Auto-deploy depuis GitHub",
  "appType": "application",
  "buildType": "dockerfile",
  "sourceType": "github",
  "repository": {
    "url": "https://github.com/GuillaumeLCTE/pivot.git",
    "branch": "main",
    "buildPath": ".",
    "dockerfilePath": "./Dockerfile"
  },
  "deployment": {
    "port": 4004,
    "replicas": 1,
    "autoDeploy": true,
    "pullRequestPreview": false
  },
  "domains": [
    {
      "host": "pivot.guillaume-lcte.fr",
      "path": "/",
      "port": 4004,
      "https": true,
      "certificateType": "letsencrypt"
    }
  ],
  "environment": {
    "APP_NAME": "Pivot",
    "APP_ENV": "production",
    "APP_KEY": "base64:gmBDzoUYk3CFz7M2ePt3hC+wUyIPvggqmyOd9EZRL94=",
    "APP_DEBUG": "false",
    "APP_URL": "https://pivot.guillaume-lcte.fr",
    "ASSET_URL": "https://pivot.guillaume-lcte.fr",
    "FORCE_HTTPS": "true",
    "LOG_CHANNEL": "stack",
    "LOG_LEVEL": "error",
    "DB_CONNECTION": "mysql",
    "DB_HOST": "51.195.43.106",
    "DB_PORT": "3306",
    "DB_DATABASE": "pivot",
    "DB_USERNAME": "pivot",
    "DB_PASSWORD": "pivot",
    "CACHE_DRIVER": "file",
    "SESSION_DRIVER": "file",
    "SESSION_LIFETIME": "120",
    "SESSION_SECURE_COOKIE": "true",
    "SESSION_SAME_SITE": "lax",
    "SESSION_DOMAIN": ".guillaume-lcte.fr",
    "QUEUE_CONNECTION": "sync",
    "MAIL_MAILER": "smtp",
    "MAIL_HOST": "51.195.43.106",
    "MAIL_PORT": "1025",
    "MAIL_FROM_ADDRESS": "noreply@guillaume-lcte.fr",
    "MAIL_FROM_NAME": "Pivot",
    "VITE_APP_NAME": "Pivot",
    "VITE_APP_URL": "https://pivot.guillaume-lcte.fr"
  },
  "healthCheck": {
    "enabled": true,
    "path": "/health",
    "interval": 30,
    "timeout": 10,
    "retries": 3,
    "startPeriod": 60
  },
  "resources": {
    "memory": "512Mi",
    "cpuLimit": "0.5",
    "cpuRequest": "0.2"
  },
  "labels": {
    "traefik.enable": "true",
    "traefik.http.routers.pivot.rule": "Host(`pivot.guillaume-lcte.fr`)",
    "traefik.http.routers.pivot.entrypoints": "websecure",
    "traefik.http.routers.pivot.tls": "true",
    "traefik.http.routers.pivot.tls.certresolver": "letsencrypt",
    "traefik.http.services.pivot.loadbalancer.server.port": "4004",
    "traefik.http.services.pivot.loadbalancer.server.scheme": "http",
    "traefik.docker.network": "dokploy-network"
  }
} 